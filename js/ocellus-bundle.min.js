/*! 2019-10-14 */
/*! lazysizes - v4.1.1 */
!function(a,b){var c=b(a,a.document);a.lazySizes=c,"object"==typeof module&&module.exports&&(module.exports=c)}(window,function(a,b){"use strict";if(b.getElementsByClassName){var c,d,e=b.documentElement,f=a.Date,g=a.HTMLPictureElement,h="addEventListener",i="getAttribute",j=a[h],k=a.setTimeout,l=a.requestAnimationFrame||k,m=a.requestIdleCallback,n=/^picture$/i,o=["load","error","lazyincluded","_lazyloaded"],p={},q=Array.prototype.forEach,r=function(a,b){return p[b]||(p[b]=new RegExp("(\\s|^)"+b+"(\\s|$)")),p[b].test(a[i]("class")||"")&&p[b]},s=function(a,b){r(a,b)||a.setAttribute("class",(a[i]("class")||"").trim()+" "+b)},t=function(a,b){var c;(c=r(a,b))&&a.setAttribute("class",(a[i]("class")||"").replace(c," "))},u=function(a,b,c){var d=c?h:"removeEventListener";c&&u(a,b),o.forEach(function(c){a[d](c,b)})},v=function(a,d,e,f,g){var h=b.createEvent("CustomEvent");return e||(e={}),e.instance=c,h.initCustomEvent(d,!f,!g,e),a.dispatchEvent(h),h},w=function(b,c){var e;!g&&(e=a.picturefill||d.pf)?(c&&c.src&&!b[i]("srcset")&&b.setAttribute("srcset",c.src),e({reevaluate:!0,elements:[b]})):c&&c.src&&(b.src=c.src)},x=function(a,b){return(getComputedStyle(a,null)||{})[b]},y=function(a,b,c){for(c=c||a.offsetWidth;c<d.minSize&&b&&!a._lazysizesWidth;)c=b.offsetWidth,b=b.parentNode;return c},z=function(){var a,c,d=[],e=[],f=d,g=function(){var b=f;for(f=d.length?e:d,a=!0,c=!1;b.length;)b.shift()();a=!1},h=function(d,e){a&&!e?d.apply(this,arguments):(f.push(d),c||(c=!0,(b.hidden?k:l)(g)))};return h._lsFlush=g,h}(),A=function(a,b){return b?function(){z(a)}:function(){var b=this,c=arguments;z(function(){a.apply(b,c)})}},B=function(a){var b,c=0,e=d.throttleDelay,g=d.ricTimeout,h=function(){b=!1,c=f.now(),a()},i=m&&g>49?function(){m(h,{timeout:g}),g!==d.ricTimeout&&(g=d.ricTimeout)}:A(function(){k(h)},!0);return function(a){var d;(a=a===!0)&&(g=33),b||(b=!0,d=e-(f.now()-c),0>d&&(d=0),a||9>d?i():k(i,d))}},C=function(a){var b,c,d=99,e=function(){b=null,a()},g=function(){var a=f.now()-c;d>a?k(g,d-a):(m||e)(e)};return function(){c=f.now(),b||(b=k(g,d))}};!function(){var b,c={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};d=a.lazySizesConfig||a.lazysizesConfig||{};for(b in c)b in d||(d[b]=c[b]);a.lazySizesConfig=d,k(function(){d.init&&F()})}();var D=function(){var g,l,m,o,p,y,D,F,G,H,I,J,K,L,M=/^img$/i,N=/^iframe$/i,O="onscroll"in a&&!/(gle|ing)bot/.test(navigator.userAgent),P=0,Q=0,R=0,S=-1,T=function(a){R--,a&&a.target&&u(a.target,T),(!a||0>R||!a.target)&&(R=0)},U=function(a,c){var d,f=a,g="hidden"==x(b.body,"visibility")||"hidden"!=x(a.parentNode,"visibility")&&"hidden"!=x(a,"visibility");for(F-=c,I+=c,G-=c,H+=c;g&&(f=f.offsetParent)&&f!=b.body&&f!=e;)g=(x(f,"opacity")||1)>0,g&&"visible"!=x(f,"overflow")&&(d=f.getBoundingClientRect(),g=H>d.left&&G<d.right&&I>d.top-1&&F<d.bottom+1);return g},V=function(){var a,f,h,j,k,m,n,p,q,r=c.elements;if((o=d.loadMode)&&8>R&&(a=r.length)){f=0,S++,null==K&&("expand"in d||(d.expand=e.clientHeight>500&&e.clientWidth>500?500:370),J=d.expand,K=J*d.expFactor),K>Q&&1>R&&S>2&&o>2&&!b.hidden?(Q=K,S=0):Q=o>1&&S>1&&6>R?J:P;for(;a>f;f++)if(r[f]&&!r[f]._lazyRace)if(O)if((p=r[f][i]("data-expand"))&&(m=1*p)||(m=Q),q!==m&&(y=innerWidth+m*L,D=innerHeight+m,n=-1*m,q=m),h=r[f].getBoundingClientRect(),(I=h.bottom)>=n&&(F=h.top)<=D&&(H=h.right)>=n*L&&(G=h.left)<=y&&(I||H||G||F)&&(d.loadHidden||"hidden"!=x(r[f],"visibility"))&&(l&&3>R&&!p&&(3>o||4>S)||U(r[f],m))){if(ba(r[f]),k=!0,R>9)break}else!k&&l&&!j&&4>R&&4>S&&o>2&&(g[0]||d.preloadAfterLoad)&&(g[0]||!p&&(I||H||G||F||"auto"!=r[f][i](d.sizesAttr)))&&(j=g[0]||r[f]);else ba(r[f]);j&&!k&&ba(j)}},W=B(V),X=function(a){s(a.target,d.loadedClass),t(a.target,d.loadingClass),u(a.target,Z),v(a.target,"lazyloaded")},Y=A(X),Z=function(a){Y({target:a.target})},$=function(a,b){try{a.contentWindow.location.replace(b)}catch(c){a.src=b}},_=function(a){var b,c=a[i](d.srcsetAttr);(b=d.customMedia[a[i]("data-media")||a[i]("media")])&&a.setAttribute("media",b),c&&a.setAttribute("srcset",c)},aa=A(function(a,b,c,e,f){var g,h,j,l,o,p;(o=v(a,"lazybeforeunveil",b)).defaultPrevented||(e&&(c?s(a,d.autosizesClass):a.setAttribute("sizes",e)),h=a[i](d.srcsetAttr),g=a[i](d.srcAttr),f&&(j=a.parentNode,l=j&&n.test(j.nodeName||"")),p=b.firesLoad||"src"in a&&(h||g||l),o={target:a},p&&(u(a,T,!0),clearTimeout(m),m=k(T,2500),s(a,d.loadingClass),u(a,Z,!0)),l&&q.call(j.getElementsByTagName("source"),_),h?a.setAttribute("srcset",h):g&&!l&&(N.test(a.nodeName)?$(a,g):a.src=g),f&&(h||l)&&w(a,{src:g})),a._lazyRace&&delete a._lazyRace,t(a,d.lazyClass),z(function(){(!p||a.complete&&a.naturalWidth>1)&&(p?T(o):R--,X(o))},!0)}),ba=function(a){var b,c=M.test(a.nodeName),e=c&&(a[i](d.sizesAttr)||a[i]("sizes")),f="auto"==e;(!f&&l||!c||!a[i]("src")&&!a.srcset||a.complete||r(a,d.errorClass)||!r(a,d.lazyClass))&&(b=v(a,"lazyunveilread").detail,f&&E.updateElem(a,!0,a.offsetWidth),a._lazyRace=!0,R++,aa(a,b,f,e,c))},ca=function(){if(!l){if(f.now()-p<999)return void k(ca,999);var a=C(function(){d.loadMode=3,W()});l=!0,d.loadMode=3,W(),j("scroll",function(){3==d.loadMode&&(d.loadMode=2),a()},!0)}};return{_:function(){p=f.now(),c.elements=b.getElementsByClassName(d.lazyClass),g=b.getElementsByClassName(d.lazyClass+" "+d.preloadClass),L=d.hFac,j("scroll",W,!0),j("resize",W,!0),a.MutationObserver?new MutationObserver(W).observe(e,{childList:!0,subtree:!0,attributes:!0}):(e[h]("DOMNodeInserted",W,!0),e[h]("DOMAttrModified",W,!0),setInterval(W,999)),j("hashchange",W,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(a){b[h](a,W,!0)}),/d$|^c/.test(b.readyState)?ca():(j("load",ca),b[h]("DOMContentLoaded",W),k(ca,2e4)),c.elements.length?(V(),z._lsFlush()):W()},checkElems:W,unveil:ba}}(),E=function(){var a,c=A(function(a,b,c,d){var e,f,g;if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),n.test(b.nodeName||""))for(e=b.getElementsByTagName("source"),f=0,g=e.length;g>f;f++)e[f].setAttribute("sizes",d);c.detail.dataAttr||w(a,c.detail)}),e=function(a,b,d){var e,f=a.parentNode;f&&(d=y(a,f,d),e=v(a,"lazybeforesizes",{width:d,dataAttr:!!b}),e.defaultPrevented||(d=e.detail.width,d&&d!==a._lazysizesWidth&&c(a,f,e,d)))},f=function(){var b,c=a.length;if(c)for(b=0;c>b;b++)e(a[b])},g=C(f);return{_:function(){a=b.getElementsByClassName(d.autosizesClass),j("resize",g)},checkElems:g,updateElem:e}}(),F=function(){F.i||(F.i=!0,E._(),D._())};return c={cfg:d,autoSizer:E,loader:D,init:F,uP:w,aC:s,rC:t,hC:r,fire:v,gW:y,rAF:z}}});
(function defineMustache(global,factory){if(typeof exports==="object"&&exports&&typeof exports.nodeName!=="string"){factory(exports)}else if(typeof define==="function"&&define.amd){define(["exports"],factory)}else{global.Mustache={};factory(global.Mustache)}})(this,function mustacheFactory(mustache){var objectToString=Object.prototype.toString;var isArray=Array.isArray||function isArrayPolyfill(object){return objectToString.call(object)==="[object Array]"};function isFunction(object){return typeof object==="function"}function typeStr(obj){return isArray(obj)?"array":typeof obj}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(obj,propName){return obj!=null&&typeof obj==="object"&&propName in obj}var regExpTest=RegExp.prototype.test;function testRegExp(re,string){return regExpTest.call(re,string)}var nonSpaceRe=/\S/;function isWhitespace(string){return!testRegExp(nonSpaceRe,string)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(string){return String(string).replace(/[&<>"'`=\/]/g,function fromEntityMap(s){return entityMap[s]})}var whiteRe=/\s*/;var spaceRe=/\s+/;var equalsRe=/\s*=/;var curlyRe=/\s*\}/;var tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(template,tags){if(!template)return[];var sections=[];var tokens=[];var spaces=[];var hasTag=false;var nonSpace=false;function stripSpace(){if(hasTag&&!nonSpace){while(spaces.length)delete tokens[spaces.pop()]}else{spaces=[]}hasTag=false;nonSpace=false}var openingTagRe,closingTagRe,closingCurlyRe;function compileTags(tagsToCompile){if(typeof tagsToCompile==="string")tagsToCompile=tagsToCompile.split(spaceRe,2);if(!isArray(tagsToCompile)||tagsToCompile.length!==2)throw new Error("Invalid tags: "+tagsToCompile);openingTagRe=new RegExp(escapeRegExp(tagsToCompile[0])+"\\s*");closingTagRe=new RegExp("\\s*"+escapeRegExp(tagsToCompile[1]));closingCurlyRe=new RegExp("\\s*"+escapeRegExp("}"+tagsToCompile[1]))}compileTags(tags||mustache.tags);var scanner=new Scanner(template);var start,type,value,chr,token,openSection;while(!scanner.eos()){start=scanner.pos;value=scanner.scanUntil(openingTagRe);if(value){for(var i=0,valueLength=value.length;i<valueLength;++i){chr=value.charAt(i);if(isWhitespace(chr)){spaces.push(tokens.length)}else{nonSpace=true}tokens.push(["text",chr,start,start+1]);start+=1;if(chr==="\n")stripSpace()}}if(!scanner.scan(openingTagRe))break;hasTag=true;type=scanner.scan(tagRe)||"name";scanner.scan(whiteRe);if(type==="="){value=scanner.scanUntil(equalsRe);scanner.scan(equalsRe);scanner.scanUntil(closingTagRe)}else if(type==="{"){value=scanner.scanUntil(closingCurlyRe);scanner.scan(curlyRe);scanner.scanUntil(closingTagRe);type="&"}else{value=scanner.scanUntil(closingTagRe)}if(!scanner.scan(closingTagRe))throw new Error("Unclosed tag at "+scanner.pos);token=[type,value,start,scanner.pos];tokens.push(token);if(type==="#"||type==="^"){sections.push(token)}else if(type==="/"){openSection=sections.pop();if(!openSection)throw new Error('Unopened section "'+value+'" at '+start);if(openSection[1]!==value)throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}else if(type==="name"||type==="{"||type==="&"){nonSpace=true}else if(type==="="){compileTags(value)}}openSection=sections.pop();if(openSection)throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos);return nestTokens(squashTokens(tokens))}function squashTokens(tokens){var squashedTokens=[];var token,lastToken;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];if(token){if(token[0]==="text"&&lastToken&&lastToken[0]==="text"){lastToken[1]+=token[1];lastToken[3]=token[3]}else{squashedTokens.push(token);lastToken=token}}}return squashedTokens}function nestTokens(tokens){var nestedTokens=[];var collector=nestedTokens;var sections=[];var token,section;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];switch(token[0]){case"#":case"^":collector.push(token);sections.push(token);collector=token[4]=[];break;case"/":section=sections.pop();section[5]=token[2];collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}}return nestedTokens}function Scanner(string){this.string=string;this.tail=string;this.pos=0}Scanner.prototype.eos=function eos(){return this.tail===""};Scanner.prototype.scan=function scan(re){var match=this.tail.match(re);if(!match||match.index!==0)return"";var string=match[0];this.tail=this.tail.substring(string.length);this.pos+=string.length;return string};Scanner.prototype.scanUntil=function scanUntil(re){var index=this.tail.search(re),match;switch(index){case-1:match=this.tail;this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index);this.tail=this.tail.substring(index)}this.pos+=match.length;return match};function Context(view,parentContext){this.view=view;this.cache={".":this.view};this.parent=parentContext}Context.prototype.push=function push(view){return new Context(view,this)};Context.prototype.lookup=function lookup(name){var cache=this.cache;var value;if(cache.hasOwnProperty(name)){value=cache[name]}else{var context=this,names,index,lookupHit=false;while(context){if(name.indexOf(".")>0){value=context.view;names=name.split(".");index=0;while(value!=null&&index<names.length){if(index===names.length-1)lookupHit=hasProperty(value,names[index]);value=value[names[index++]]}}else{value=context.view[name];lookupHit=hasProperty(context.view,name)}if(lookupHit)break;context=context.parent}cache[name]=value}if(isFunction(value))value=value.call(this.view);return value};function Writer(){this.cache={}}Writer.prototype.clearCache=function clearCache(){this.cache={}};Writer.prototype.parse=function parse(template,tags){var cache=this.cache;var tokens=cache[template];if(tokens==null)tokens=cache[template]=parseTemplate(template,tags);return tokens};Writer.prototype.render=function render(template,view,partials){var tokens=this.parse(template);var context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template)};Writer.prototype.renderTokens=function renderTokens(tokens,context,partials,originalTemplate){var buffer="";var token,symbol,value;for(var i=0,numTokens=tokens.length;i<numTokens;++i){value=undefined;token=tokens[i];symbol=token[0];if(symbol==="#")value=this.renderSection(token,context,partials,originalTemplate);else if(symbol==="^")value=this.renderInverted(token,context,partials,originalTemplate);else if(symbol===">")value=this.renderPartial(token,context,partials,originalTemplate);else if(symbol==="&")value=this.unescapedValue(token,context);else if(symbol==="name")value=this.escapedValue(token,context);else if(symbol==="text")value=this.rawValue(token);if(value!==undefined)buffer+=value}return buffer};Writer.prototype.renderSection=function renderSection(token,context,partials,originalTemplate){var self=this;var buffer="";var value=context.lookup(token[1]);function subRender(template){return self.render(template,context,partials)}if(!value)return;if(isArray(value)){for(var j=0,valueLength=value.length;j<valueLength;++j){buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate)}}else if(typeof value==="object"||typeof value==="string"||typeof value==="number"){buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate)}else if(isFunction(value)){if(typeof originalTemplate!=="string")throw new Error("Cannot use higher-order sections without the original template");value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender);if(value!=null)buffer+=value}else{buffer+=this.renderTokens(token[4],context,partials,originalTemplate)}return buffer};Writer.prototype.renderInverted=function renderInverted(token,context,partials,originalTemplate){var value=context.lookup(token[1]);if(!value||isArray(value)&&value.length===0)return this.renderTokens(token[4],context,partials,originalTemplate)};Writer.prototype.renderPartial=function renderPartial(token,context,partials){if(!partials)return;var value=isFunction(partials)?partials(token[1]):partials[token[1]];if(value!=null)return this.renderTokens(this.parse(value),context,partials,value)};Writer.prototype.unescapedValue=function unescapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return value};Writer.prototype.escapedValue=function escapedValue(token,context){var value=context.lookup(token[1]);if(value!=null)return mustache.escape(value)};Writer.prototype.rawValue=function rawValue(token){return token[1]};mustache.name="mustache.js";mustache.version="2.3.0";mustache.tags=["{{","}}"];var defaultWriter=new Writer;mustache.clearCache=function clearCache(){return defaultWriter.clearCache()};mustache.parse=function parse(template,tags){return defaultWriter.parse(template,tags)};mustache.render=function render(template,view,partials){if(typeof template!=="string"){throw new TypeError('Invalid template! Template should be a "string" '+'but "'+typeStr(template)+'" was given as the first '+"argument for mustache#render(template, view, partials)")}return defaultWriter.render(template,view,partials)};mustache.to_html=function to_html(template,view,partials,send){var result=mustache.render(template,view,partials);if(isFunction(send)){send(result)}else{return result}};mustache.escape=escapeHtml;mustache.Scanner=Scanner;mustache.Context=Context;mustache.Writer=Writer;return mustache});

// JavaScript autoComplete v1.0.4
// https://github.com/Pixabay/JavaScript-autoComplete
var autoComplete=function(){function e(e){function t(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function o(e,t,o){e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener(t,o)}function s(e,t,o){e.detachEvent?e.detachEvent("on"+t,o):e.removeEventListener(t,o)}function n(e,s,n,l){o(l||document,s,function(o){for(var s,l=o.target||o.srcElement;l&&!(s=t(l,e));)l=l.parentElement;s&&n.call(l,o)})}if(document.querySelector){var l={selector:0,source:0,minChars:3,delay:150,offsetLeft:0,offsetTop:1,cache:1,menuClass:"",renderItem:function(e,t){t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");var o=new RegExp("("+t.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+e+'">'+e.replace(o,"<b>$1</b>")+"</div>"},onSelect:function(){}};for(var c in e)e.hasOwnProperty(c)&&(l[c]=e[c]);for(var a="object"==typeof l.selector?[l.selector]:document.querySelectorAll(l.selector),u=0;u<a.length;u++){var i=a[u];i.sc=document.createElement("div"),i.sc.className="autocomplete-suggestions "+l.menuClass,i.autocompleteAttr=i.getAttribute("autocomplete"),i.setAttribute("autocomplete","off"),i.cache={},i.last_val="",i.updateSC=function(e,t){var o=i.getBoundingClientRect();if(i.sc.style.left=Math.round(o.left+(window.pageXOffset||document.documentElement.scrollLeft)+l.offsetLeft)+"px",i.sc.style.top=Math.round(o.bottom+(window.pageYOffset||document.documentElement.scrollTop)+l.offsetTop)+"px",i.sc.style.width=Math.round(o.right-o.left)+"px",!e&&(i.sc.style.display="block",i.sc.maxHeight||(i.sc.maxHeight=parseInt((window.getComputedStyle?getComputedStyle(i.sc,null):i.sc.currentStyle).maxHeight)),i.sc.suggestionHeight||(i.sc.suggestionHeight=i.sc.querySelector(".autocomplete-suggestion").offsetHeight),i.sc.suggestionHeight))if(t){var s=i.sc.scrollTop,n=t.getBoundingClientRect().top-i.sc.getBoundingClientRect().top;n+i.sc.suggestionHeight-i.sc.maxHeight>0?i.sc.scrollTop=n+i.sc.suggestionHeight+s-i.sc.maxHeight:0>n&&(i.sc.scrollTop=n+s)}else i.sc.scrollTop=0},o(window,"resize",i.updateSC),document.body.appendChild(i.sc),n("autocomplete-suggestion","mouseleave",function(){var e=i.sc.querySelector(".autocomplete-suggestion.selected");e&&setTimeout(function(){e.className=e.className.replace("selected","")},20)},i.sc),n("autocomplete-suggestion","mouseover",function(){var e=i.sc.querySelector(".autocomplete-suggestion.selected");e&&(e.className=e.className.replace("selected","")),this.className+=" selected"},i.sc),n("autocomplete-suggestion","mousedown",function(e){if(t(this,"autocomplete-suggestion")){var o=this.getAttribute("data-val");i.value=o,l.onSelect(e,o,this),i.sc.style.display="none"}},i.sc),i.blurHandler=function(){try{var e=document.querySelector(".autocomplete-suggestions:hover")}catch(t){var e=0}e?i!==document.activeElement&&setTimeout(function(){i.focus()},20):(i.last_val=i.value,i.sc.style.display="none",setTimeout(function(){i.sc.style.display="none"},350))},o(i,"blur",i.blurHandler);var r=function(e){var t=i.value;if(i.cache[t]=e,e.length&&t.length>=l.minChars){for(var o="",s=0;s<e.length;s++)o+=l.renderItem(e[s],t);i.sc.innerHTML=o,i.updateSC(0)}else i.sc.style.display="none"};i.keydownHandler=function(e){var t=window.event?e.keyCode:e.which;if((40==t||38==t)&&i.sc.innerHTML){var o,s=i.sc.querySelector(".autocomplete-suggestion.selected");return s?(o=40==t?s.nextSibling:s.previousSibling,o?(s.className=s.className.replace("selected",""),o.className+=" selected",i.value=o.getAttribute("data-val")):(s.className=s.className.replace("selected",""),i.value=i.last_val,o=0)):(o=40==t?i.sc.querySelector(".autocomplete-suggestion"):i.sc.childNodes[i.sc.childNodes.length-1],o.className+=" selected",i.value=o.getAttribute("data-val")),i.updateSC(0,o),!1}if(27==t)i.value=i.last_val,i.sc.style.display="none";else if(13==t||9==t){var s=i.sc.querySelector(".autocomplete-suggestion.selected");s&&"none"!=i.sc.style.display&&(l.onSelect(e,s.getAttribute("data-val"),s),setTimeout(function(){i.sc.style.display="none"},20))}},o(i,"keydown",i.keydownHandler),i.keyupHandler=function(e){var t=window.event?e.keyCode:e.which;if(!t||(35>t||t>40)&&13!=t&&27!=t){var o=i.value;if(o.length>=l.minChars){if(o!=i.last_val){if(i.last_val=o,clearTimeout(i.timer),l.cache){if(o in i.cache)return void r(i.cache[o]);for(var s=1;s<o.length-l.minChars;s++){var n=o.slice(0,o.length-s);if(n in i.cache&&!i.cache[n].length)return void r([])}}i.timer=setTimeout(function(){l.source(o,r)},l.delay)}}else i.last_val=o,i.sc.style.display="none"}},o(i,"keyup",i.keyupHandler),i.focusHandler=function(e){i.last_val="\n",i.keyupHandler(e)},l.minChars||o(i,"focus",i.focusHandler)}this.destroy=function(){for(var e=0;e<a.length;e++){var t=a[e];s(window,"resize",t.updateSC),s(t,"blur",t.blurHandler),s(t,"focus",t.focusHandler),s(t,"keydown",t.keydownHandler),s(t,"keyup",t.keyupHandler),t.autocompleteAttr?t.setAttribute("autocomplete",t.autocompleteAttr):t.removeAttribute("autocomplete"),document.body.removeChild(t.sc),t=null}}}}return e}();!function(){"function"==typeof define&&define.amd?define("autoComplete",function(){return autoComplete}):"undefined"!=typeof module&&module.exports?module.exports=autoComplete:window.autoComplete=autoComplete}();
"undefined"!=typeof BLR&&"object"==typeof BLR||(BLR={}),"base"in BLR||(BLR.base={}),BLR.base.size=30,BLR.base.zenodo="https://zenodo.org/record/",BLR.base.dom={panels:document.querySelectorAll(".panel"),modals:document.querySelectorAll(".modal"),resources:document.querySelectorAll(".resource"),headerContainer:document.querySelector("header"),header:document.querySelector("#header"),index:document.querySelector("#index"),throbber:document.querySelector("#throbber"),form:document.querySelector("form"),q:document.querySelector("form input[name=q]"),go:document.querySelector("form input[name=go]"),resourceSelector:document.querySelector("form > nav"),urlFlagSelectors:document.querySelectorAll("form .urlFlag"),communitiesSelector:document.querySelector("form .drop-down"),communityCheckBoxes:document.querySelectorAll("form input[name=communities]"),allCommunities:document.querySelector('form input[value="all communities"]'),refreshCacheSelector:document.querySelector("form input[name=refreshCache]"),refreshCacheWarning:document.querySelector("form .refreshCacheWarning"),title:document.querySelector("a.title"),"modal-open":document.querySelectorAll(".modal-open"),"modal-close":document.querySelectorAll(".modal-close"),map:document.querySelector("#map"),images:{section:document.querySelector("#images"),searchCriteria:document.querySelector("#images .searchCriteria"),charts:document.querySelector("#images .charts"),results:document.querySelector("#images .results")},treatment:{section:document.querySelector("#treatment"),searchCriteria:document.querySelector("#treatment .searchCriteria"),charts:document.querySelector("#treatment .charts"),results:document.querySelector("#treatment .results")},treatments:{section:document.querySelector("#treatments"),searchCriteria:document.querySelector("#treatments .searchCriteria"),charts:document.querySelector("#treatments .charts"),results:document.querySelector("#treatments .results")},wrapper:document.querySelector("#wrapper")},BLR.base.templates={partials:{"template-pager":document.querySelector("#template-pager").innerHTML,"template-records-found":document.querySelector("#template-records-found").innerHTML,"template-charts":document.querySelector("#template-charts").innerHTML,"template-figures":document.querySelector("#template-figures").innerHTML},wholes:{treatments:document.querySelector("#template-treatments").innerHTML,treatment:document.querySelector("#template-treatment").innerHTML,images:document.querySelector("#template-images").innerHTML}},BLR.base.map={url:"https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',id:"mapbox.streets",accessToken:"pk.eyJ1IjoicHVua2lzaCIsImEiOiJjajhvOXY0dW8wMTA3MndvMzBlamlhaGZyIn0.3Ye8NRiiGyjJ1fud7VbtOA",leaflet:{}},BLR.base.modals=Array.from(BLR.base.dom.modals).map(m=>m.id),BLR.base.resources=Array.from(BLR.base.dom.resources).map(m=>m.id),BLR.base.resource="",BLR.base.defaultResource="images",BLR.base.figcaptionHeight="30px",BLR.base.figcaptions=[],BLR.base.savedPanel={id:"",search:""},BLR.base.model={treatments:{},images:{}},BLR.base.compileTemplates=function(){for(let t in BLR.base.templates.wholes)Mustache.parse(BLR.base.templates.wholes[t]);for(let t in BLR.base.templates.partials)Mustache.parse(BLR.base.templates.partials[t])},BLR.base.init=function(){BLR.base.compileTemplates(),BLR.utils.addEvents(),BLR.utils.linkLoad()},"undefined"!=typeof BLR&&"object"==typeof BLR||(BLR={}),"eventlisteners"in BLR||(BLR.eventlisteners={}),BLR.eventlisteners.openModal=function(event){event.stopPropagation(),event.preventDefault(),BLR.utils.turnOffAll();const id=event.target.href.split("/").pop().split(".")[0];BLR.utils.turnOnById(id),history.pushState("","",`${id}.html`)},BLR.eventlisteners.toggle=function(elements,state){const len=elements.length;if("on"===state)if(len>1)for(let i=0,j=len;i<j;i++)BLR.utils.turnOn(elements[i]);else BLR.utils.turnOn(elements);else if("off"===state)if(len>1)for(let i=0,j=len;i<j;i++)BLR.utils.turnOff(elements[i]);else BLR.utils.turnOff(elements)},BLR.eventlisteners.toggleCommunities=function(event){BLR.base.dom.communitiesSelector.classList.toggle("open")},BLR.eventlisteners.toggleRefreshCache=function(event){BLR.base.dom.refreshCacheWarning.classList.toggle("show")},BLR.eventlisteners.closeModal=function(event){event.stopPropagation(),event.preventDefault();for(let i=0,j=BLR.base.dom.modals.length;i<j;i++)BLR.base.dom.modals[i].classList.contains("visible")&&BLR.utils.turnOff(BLR.base.dom.modals[i]);if(BLR.base.savedPanel.id){BLR.utils.turnOnById(BLR.base.savedPanel.id);let uri=`${BLR.base.savedPanel.id}.html`+(BLR.base.savedPanel.search||"");history.pushState("","",uri)}else BLR.utils.turnOnById("index"),history.pushState("","","index.html")},BLR.eventlisteners.goHome=function(event){event.stopPropagation(),event.preventDefault(),BLR.utils.turnOffAll(),BLR.utils.turnOnById("index"),BLR.base.dom.q.value="",history.pushState("","","index.html")},BLR.eventlisteners.activateUrlFlagSelectors=function(){for(let i=0,j=BLR.base.dom.urlFlagSelectors.length;i<j;i++){const element=BLR.base.dom.urlFlagSelectors[i];element.addEventListener("click",function(event){BLR.utils.chooseUrlFlags(element),"communities"===element.name&&BLR.base.dom.communitiesSelector.classList.remove("open")})}},BLR.eventlisteners.goGetIt=function(event){if(event.stopPropagation(),event.preventDefault(),BLR.utils.formHasNoValidInput())return void(BLR.base.dom.q.placeholder="c’mon, enter something");const browserUri=BLR.utils.makeBrowserUri();history.pushState("","",browserUri);const zenodeoUri=BLR.utils.makeZenodeoUriFromInputs();BLR.utils.loadResource(zenodeoUri)},BLR.eventlisteners.toggleFigcaption=function(event){0==BLR.base.figcaptions.length&&(BLR.base.figcaptions=document.querySelectorAll("figcaption"));let fc=this.parentElement.style.maxHeight;if(fc===BLR.base.figcaptionHeight||""===fc){let i=0;for(;i<BLR.base.figcaptions.length;i++)BLR.base.figcaptions[i].style.maxHeight=BLR.base.figcaptionHeight;this.parentElement.style.maxHeight="100%",this.parentElement.style.overflow="auto"}else this.parentElement.style.maxHeight=BLR.base.figcaptionHeight,this.parentElement.style.overflow="hidden"},"undefined"!=typeof BLR&&"object"==typeof BLR||(BLR={}),"images"in BLR||(BLR.images={}),BLR.images.makeLayout=function(records){let figures=[];for(let i=0,j=records.length;i<j;i++){const figure={title:records[i].title,creators:records[i].creators?records[i].creators.map(c=>c.name):[],recId:records[i].id,zenodoRecord:BLR.base.zenodo+records[i].id,description:records[i].description,doi:records[i].doi,imgBlur:"img/kein-preview.png",img50:"img/kein-preview.png",img100:"img/kein-preview.png",img250:"img/kein-preview.png",img750:"img/kein-preview.png",image1200:"img/kein-preview.png"};records[i].thumbs&&(figure.imgBlur=records[i].thumbs[10],figure.img50=records[i].thumbs[50],figure.img100=records[i].thumbs[100],figure.img250=records[i].thumbs[250],figure.img750=records[i].thumbs[750],figure.image1200=records[i].thumbs[1200]),figures.push(figure)}return figures},BLR.images.turnCarouselOn=function(data,recId){BLR.base.dom.carousel.innerHTML=Mustache.render(tmplCarousel,data),BLR.base.dom.wrapper.classList.remove("show"),BLR.base.dom.carouselContainer.classList.add("show");const carouselOff=document.querySelectorAll(".carouselOff");for(let i=0,j=carouselOff.length;i<j;i++)carouselOff[i].addEventListener("click",turnCarouselOff);const newhash="#"+recId;history.pushState?history.pushState(null,null,newhash):location.hash=newhash},BLR.images.turnCarouselOff=function(event){BLR.base.dom.wrapper.classList.add("show"),BLR.base.dom.carouselContainer.classList.remove("show")},BLR.images.getImages=function(uri){fetch(uri).then(BLR.utils.fetchReceive).then(function(res){if(res.value?BLR.base.model.images=res.value:res["num-of-records"]&&(BLR.base.model.images=res),BLR.base.model.images["num-of-records"])if(BLR.base.model.images.resource="images",BLR.base.model.images["num-of-records"]>0){BLR.base.model.images["num-of-records"]?(BLR.base.model.images.successful=!0,BLR.base.model.images["num-of-records"]=BLR.utils.niceNumbers(BLR.base.model.images["num-of-records"]),BLR.base.model.images.from=BLR.utils.niceNumbers(BLR.base.model.images.from),BLR.base.model.images.to<10&&(BLR.base.model.images.to=BLR.utils.niceNumbers(BLR.base.model.images.to).toLowerCase()),BLR.base.model.images.figures=BLR.images.makeLayout(BLR.base.model.images.records),BLR.base.model.images["search-criteria-text"]=BLR.utils.formatSearchCriteria(BLR.base.model.images["search-criteria"],BLR.base.model.images["num-of-records"],"images"),BLR.utils.makePager(BLR.base.model.images)):BLR.base.model.images.successful=!1,BLR.base.dom.images.results.innerHTML=Mustache.render(BLR.base.templates.wholes.images,BLR.base.model.images,BLR.base.templates.partials);const figs=document.querySelectorAll("figcaption > a");for(let i=0,j=figs.length;i<j;i++)figs[i].addEventListener("click",BLR.eventlisteners.toggleFigcaption);const carousel=document.querySelectorAll(".carousel");for(let i=0,j=carousel.length;i<j;i++)carousel[i].addEventListener("click",function(event){BLR.images.turnCarouselOn(data,data.figures[i].recId)})}else BLR.base.model.images.successful=!1,BLR.base.model.images["num-of-records"]="No",BLR.base.dom.images.results.innerHTML=Mustache.render(BLR.base.templates.wholes.images,BLR.base.model.images,BLR.base.templates.partials);BLR.utils.turnOffAll(),BLR.eventlisteners.toggle(BLR.base.dom.throbber,"off"),BLR.eventlisteners.toggle(BLR.base.dom.images.section,"on")})},"undefined"!=typeof BLR&&"object"==typeof BLR||(BLR={}),"treatments"in BLR||(BLR.treatments={}),BLR.treatments.getOneTreatment=function(uri){fetch(uri).then(BLR.utils.fetchReceive).then(function(res){if(BLR.base.model.treatment=res.value,uri.indexOf("xml")>-1)return BLR.base.model.treatment;BLR.treatments.loadOneTreatment(BLR.base.model)})},BLR.treatments.loadOneTreatment=function(data){if(data.treatment.imgCount=BLR.utils.niceNumbers(data.treatment.imgCount),data.treatment.zenodeo=BLR.base.zenodeo,data.treatment["related-records"].materialsCitations.length&&(data.treatment.materialsCitations=data.treatment["related-records"].materialsCitations,data.treatment.mapState="open"),data.treatment["related-records"].bibRefCitations.length&&(data.treatment.bibRefCitations=data.treatment["related-records"].bibRefCitations,data.treatment.bibRefCitationsState="open"),data.treatment["related-records"].figureCitations.length&&(data.treatment.figureCitations=data.treatment["related-records"].figureCitations,data.treatment.figureCitationsState="open"),data.treatment["related-records"].treatmentAuthors.length&&(data.treatment.treatmentAuthors=data.treatment["related-records"].treatmentAuthors,data.treatment.treatmentAuthorsList=BLR.utils.formatAuthorsList(data.treatment["related-records"].treatmentAuthors)),BLR.base.dom.treatment.results.innerHTML=Mustache.render(BLR.base.templates.wholes.treatment,data.treatment,BLR.base.templates.partials),"Zero"!==data.treatment.imgCount){const figs=document.querySelectorAll("figcaption > a");for(let i=0,j=figs.length;i<j;i++)figs[i].addEventListener("click",BLR.utils.toggleFigcaption)}data.treatment["related-records"].materialsCitations.length&&BLR.treatments.makeMap(data.treatment.materialsCitations),BLR.utils.turnOffAll(),BLR.eventlisteners.toggle(BLR.base.dom.throbber,"off"),BLR.eventlisteners.toggle(BLR.base.dom.treatment.section,"on"),BLR.base.map.leaflet.invalidateSize()},BLR.treatments.loadManyTreatments=function(data){data.treatments["num-of-records"]&&(data.treatments.resource="treatments",data.treatments["num-of-records"]>0?(data.treatments.records&&data.treatments.records.length?(data.treatments.successful=!0,data.treatments["num-of-records"]=BLR.utils.niceNumbers(data.treatments["num-of-records"]),data.treatments.from=BLR.utils.niceNumbers(data.treatments.from),data.treatments.to<10&&(data.treatments.to=BLR.utils.niceNumbers(data.treatments.to).toLowerCase()),data.treatments["search-criteria-text"]=BLR.utils.formatSearchCriteria(data.treatments["search-criteria"],data.treatments["num-of-records"],"treatments"),BLR.utils.makePager(data.treatments)):data.treatments.successful=!1,BLR.base.dom.treatments.results.innerHTML=Mustache.render(BLR.base.templates.wholes.treatments,data.treatments,BLR.base.templates.partials)):(data.treatments.successful=!1,data.treatments["num-of-records"]="No",BLR.base.dom.treatments.results.innerHTML=Mustache.render(BLR.base.templates.wholes.treatments,data.treatments,BLR.base.templates.partials))),BLR.utils.turnOffAll(),BLR.eventlisteners.toggle(BLR.base.dom.throbber,"off"),BLR.eventlisteners.toggle(BLR.base.dom.treatments.section,"on")},BLR.treatments.getManyTreatments=function(uri){fetch(uri).then(BLR.utils.fetchReceive).then(function(res){BLR.base.model.treatments=res.value,BLR.treatments.loadManyTreatments(BLR.base.model)})},BLR.treatments.getTreatments=function(uri){uri.indexOf("treatmentId")>-1?BLR.treatments.getOneTreatment(uri):BLR.treatments.getManyTreatments(uri)},BLR.treatments.makeMap=function(points){BLR.base.map.leaflet=L.map("map",{center:[0,0],zoom:2,scrollWheelZoom:!1});L.tileLayer(BLR.base.map.url,{attribution:BLR.base.map.attribution,maxZoom:18,id:BLR.base.map.id,accessToken:BLR.base.map.accessToken}).addTo(BLR.base.map.leaflet);const markers=[];points.forEach(p=>{if("number"==typeof p.latitude&&"number"==typeof p.longitude){const title=points.treatmentTitle,marker=L.marker([p.latitude,p.longitude]).addTo(BLR.base.map.leaflet);marker.bindPopup(p.typeStatus+"<br>"+title),markers.push(marker)}});const bounds=new L.featureGroup(markers).getBounds();BLR.base.map.leaflet.fitBounds(bounds)},"undefined"!=typeof BLR&&"object"==typeof BLR||(BLR={}),"utils"in BLR||(BLR.utils={}),BLR.utils.statsChart=function(resource,statistics){Chart.platform.disableCSSInjection=!0;const formatter=function(value,context){return value>1e6?`${Math.round(value/1e6)}M`:value>1e3?`${Math.round(value/1e3)}K`:value},charts=document.querySelectorAll(`#${resource} .chart`);for(let i=0,j=charts.length;i<j;i++){const ctx=charts[i].getContext("2d");new Chart(ctx,{type:"bar",data:{labels:Object.keys(statistics.charts[i].data),datasets:[{label:statistics.charts[i].title,data:Object.values(statistics.charts[i].data),datalabels:{color:"#000000",formatter:formatter},backgroundColor:"#ff0000",borderWidth:1}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,callback:formatter}}],xAxes:[{scaleLabel:{fontSize:8}}]},responsive:!0,tooltips:{enabled:!1},legend:{display:!1}}})}},BLR.utils.niceNumbers=function(n){return n>9?n:["No","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"][n]},BLR.utils.formatSearchCriteria=function(s,n,resource){const remove=["communities","refreshCache","size","page","go"],criteria=[];for(let k in s)if(!remove.includes(k)){const v=s[k];"q"===k?criteria.push(`<span class="crit-val">${v}</span> is in the text`):criteria.push(`<span class="crit-key">${k}</span> is <span class="crit-val">${v}</span>`)}let l=criteria.length,sc="";return 1===l?sc+=criteria[0]:2===l?sc+=criteria.join(" and "):l>2&&(l-=1,sc+=criteria.slice(0,l).join(", ")+", and "+criteria[l]),sc},BLR.utils.turnOn=function(element){element.classList.remove("hidden"),element.classList.add("visible")},BLR.utils.turnOff=function(element){element.classList.remove("visible"),element.classList.add("hidden")},BLR.utils.turnOnById=function(id){BLR.utils.turnOn(document.getElementById(id))},BLR.utils.turnOffById=function(id){BLR.utils.turnOff(document.getElementById(id))},BLR.utils.turnOffAll=function(){for(let i=0,j=BLR.base.dom.panels.length;i<j;i++)BLR.base.dom.panels[i].classList.contains("visible")&&((BLR.base.resources.includes(BLR.base.dom.panels[i].id)||"index"===BLR.base.dom.panels[i].id)&&(BLR.base.savedPanel.id=BLR.base.dom.panels[i].id,BLR.base.savedPanel.search=location.search),BLR.utils.turnOff(BLR.base.dom.panels[i]))},BLR.utils.addEvents=function(){for(let i=0,j=BLR.base.dom["modal-open"].length;i<j;i++)BLR.base.dom["modal-open"][i].addEventListener("click",BLR.eventlisteners.openModal);for(let i=0,j=BLR.base.dom["modal-close"].length;i<j;i++)BLR.base.dom["modal-close"][i].addEventListener("click",BLR.eventlisteners.closeModal);BLR.base.dom.title.addEventListener("click",BLR.eventlisteners.goHome),BLR.eventlisteners.activateUrlFlagSelectors(),BLR.base.dom.communitiesSelector.addEventListener("click",BLR.eventlisteners.toggleCommunities),BLR.base.dom.refreshCacheSelector.addEventListener("click",BLR.eventlisteners.toggleRefreshCache),BLR.utils.suggest(BLR.base.dom.q),BLR.base.dom.go.addEventListener("click",BLR.eventlisteners.goGetIt),BLR.base.dom.form.addEventListener("submit",BLR.eventlisteners.goGetIt)},BLR.utils.fetchReceive=function(response){if(!response.ok)throw new Error("HTTP error, status = "+response.status);return response.json()},BLR.utils.suggest=function(field){new autoComplete({selector:field,minChars:3,source:function(term,response){try{fetch.abort()}catch(e){}fetch(`${BLR.base.zenodeo}/v2/families?q=${term}`).then(BLR.utils.fetchReceive).then(response)}})},BLR.utils.makePager=function(data){if(data["num-of-records"]&&data["num-of-records"]>=BLR.base.size){const p=[],n=[];for(let k in data["search-criteria"])"page"===k?(p.push("page="+data.prevpage),n.push("page="+data.nextpage)):(p.push(k+"="+data["search-criteria"][k]),n.push(k+"="+data["search-criteria"][k]));data.prev="?"+p.join("&"),data.next="?"+n.join("&"),data.pager=!0}else data.pager=!1},BLR.utils.chooseUrlFlags=function(element){if("communities"===element.name)if("all communities"===element.value)if(!0===element.checked)for(let i=0,j=BLR.base.dom.communityCheckBoxes.length;i<j;i++)BLR.base.dom.communityCheckBoxes[i].checked=!0;else for(let i=0,j=BLR.base.dom.communityCheckBoxes.length;i<j;i++)"all communities"!==BLR.base.dom.communityCheckBoxes[i].value&&(BLR.base.dom.communityCheckBoxes[i].checked=!1);else BLR.base.dom.allCommunities.checked=!1;else if("resource"===element.name){const labels=BLR.base.dom.resourceSelector.querySelectorAll("label"),inputs=BLR.base.dom.resourceSelector.querySelectorAll("input");for(let i=0;i<labels.length;i++)element.value===inputs[i].value?(labels[i].classList.add("searchFocus"),BLR.utils.setPlaceHolder(element.value)):labels[i].classList.remove("searchFocus")}else"refreshCache"===element.name&&(element.value=element.checked)},BLR.utils.setPlaceHolder=function(resource){BLR.base.dom.q.placeholder=`search for ${resource}`},BLR.utils.linkLoad=function(){let loc=location.pathname.substr(1).split(".")[0];if("/"!==loc&&""!==loc||(loc="index"),BLR.base.modals.includes(loc))BLR.utils.loadModal(loc);else if(BLR.base.resources.includes(loc)){const zenodeoUri=BLR.utils.makeZenodeoUriFromLoc();BLR.utils.loadResource(zenodeoUri)}},BLR.utils.formHasNoValidInput=function(){return""===BLR.base.dom.q.value},BLR.utils.makeBrowserUri=function(){const browserUriInvalid=["resource","communities","go","refreshCache"],browserUriParts=[],inputs=BLR.base.dom.form.querySelectorAll("input");for(let i=0,j=inputs.length;i<j;i++)browserUriInvalid.includes(inputs[i].name)||("checkbox"===inputs[i].type?inputs[i].checked&&browserUriParts.push(inputs[i].name+"="+inputs[i].value):inputs[i].value&&browserUriParts.push(inputs[i].name+"="+inputs[i].value)),"resource"===inputs[i].name&&inputs[i].checked&&(resource=inputs[i].value);return resource+".html?"+browserUriParts.join("&")},BLR.utils.makeZenodeoUriFromInputs=function(){const zenodeoUriValid=["communities","q","refreshCache","page","size"],zenodeoUriParts=[],inputs=BLR.base.dom.form.querySelectorAll("input");for(let i=0,j=inputs.length;i<j;i++)zenodeoUriValid.includes(inputs[i].name)&&("checkbox"===inputs[i].type?inputs[i].checked&&zenodeoUriParts.push(inputs[i].name+"="+inputs[i].value):inputs[i].value&&zenodeoUriParts.push(inputs[i].name+"="+inputs[i].value)),"resource"===inputs[i].name&&inputs[i].checked&&(BLR.base.resource=inputs[i].value);return`${BLR.base.zenodeo}/v2/${BLR.base.resource}?${zenodeoUriParts.join("&")}`},BLR.utils.makeZenodeoUriFromLoc=function(){const zenodeoUriValid=["communities","q","refreshCache","page","size","treatmentId"],zenodeoUriParts=[];let s=location.search;"?"===s.substr(0,1)&&(s=s.substr(1));const inputs={};s.split("&").forEach(p=>{r=p.split("="),inputs[r[0]]=r[1]}),inputs.q&&(BLR.base.dom.q.value=inputs.q);for(let k in inputs)zenodeoUriValid.includes(k)&&zenodeoUriParts.push(k+"="+inputs[k]);return BLR.base.resource=location.pathname.substr(1).split(".")[0],`${BLR.base.zenodeo}/v2/${BLR.base.resource}?${zenodeoUriParts.join("&")}`},BLR.utils.loadModal=function(mode){"index"===mode?(BLR.base.resource=BLR.base.defaultResource,BLR.utils.setPlaceHolder(BLR.base.resource),BLR.utils.turnOnById("index"),BLR.base.dom.q.focus()):(BLR.utils.turnOffAll(),BLR.utils.turnOnById(mode))},BLR.utils.loadResource=function(uri){"treatments"===BLR.base.resource?BLR.treatments.getTreatments(uri):"images"===BLR.base.resource&&BLR.images.getImages(uri)},BLR.utils.formatAuthorsList=function(treatmentAuthors){let c="";const l=treatmentAuthors.length;if(1===l)c+=treatmentAuthors[0].author;else if(2===l)c+=`${treatmentAuthors[0].author} and ${treatmentAuthors[1].author}`;else{const ab=treatmentAuthors.slice(0,l-1),last=treatmentAuthors[l-1].author;c+=ab.map(e=>e.author).join(", ")+" and "+last}return c};
//# sourceMappingURL=ocellus-bundle.min.js.map