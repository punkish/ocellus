/* generated: Sun Jul 09 2023 12:09:23 GMT+0200 (Central European Summer Time) */
const e=e=>document.querySelector(e),t=e=>document.querySelectorAll(e),a={server:"localhost"===window.location.hostname?"http://localhost:3010/v3":"https://test.zenodeo.org/v3",cache:{zenodoImages:0,zenodeoImages:0,zenodeoTreatments:0},figureSize:{normal:250,small:100,tiny:50},results:{totalCount:0,figures:[],page:1,size:30},resources:["treatments","citations","images"],pseudoResources:["about","ip","contact","privacy"],params:{notValidQ:["resource","page","size","grid","refreshCache","cols"],validZenodo:["id","subtype","communities","q","creator","title","keywords"],validZenodeo:["httpUri","caption","captionText","treatmentId","treatmentTitle","articleTitle","treatmentDOI","articleDOI","zenodoDep","q","journalTitle","journalYear","authorityName","kingdom","phylum","class","family","order","genus","species","publicationDate","checkinTime","latitude","longitude","geolocation","isOnLand","validGeo","refreshCache","page","size","cols"],notValidSearchCriteria:["resource","communities","communitiesChooser","refreshCache","view","size","page","reset","submit","source","grid"]},notq:["resource","page","size","grid","refreshCache","cols"],validZenodo:["id","subtype","communities","q","creator","title","keywords"],hiddenClasses:["hidden","noblock"],notInSearchCriteria:["resource","communities","communitiesChooser","refreshCache","view","size","page","reset","submit","source","grid"],closedFigcaptionHeight:"30px",zenodoUri:"https://zenodo.org/record",tbUri:"https://tb.plazi.org/GgServer/html",H3ColorRamp:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#b10026"],treatmentIcon:{iconUrl:"/img/treatment.svg",iconSize:[24,24],iconAnchor:[0,0],popupAnchor:[13,12]},treatmentIconHighlighted:{iconUrl:"/img/treatment-highlighted.svg",iconSize:[24,24],iconAnchor:[0,0],popupAnchor:[13,12]}},r=function({selector:e,helpText:t,facets:a,cb:r}){const o=a.map((e=>e.key)),s=r;let n;const i=function({element:e,attribs:t,container:a}){const r=document.createElement(e);for(let[e,a]of Object.entries(t))"innerText"===e||"innerHTML"===e?r[e]=a:r.setAttribute(e,a);return a.appendChild(r),r},c=function(){const e=i({element:"div",attribs:{class:"fs-param-empty"},container:n});i({element:"div",attribs:{class:"fs-key fs-off"},container:e});const t=i({element:"input",attribs:{class:"query fs-key-input",placeholder:"choose a keyâ€¦"},container:e});i({element:"div",attribs:{class:"fs-val fs-off"},container:e});const a=i({element:"input",attribs:{class:"query fs-val-input fs-off",placeholder:"choose a valueâ€¦"},container:e}),r=i({element:"button",attribs:{class:"fs-cancel fs-off",type:"reset",innerHTML:"&#8855;"},container:e});t.addEventListener("keydown",l),a.addEventListener("keydown",l),r.addEventListener("click",d),u({type:"key",selector:t,values:o}),t.focus()},l=function(e){const t=(e=e||window.event).which||e.keyCode;let a=e.target;const r=a.parentElement,o=r.children[2],s=r.children[3],n=r.children[4];if(13==t)return""!==s.value&&(r.className="fs-param-filled",o.innerText=s.value,o.className="fs-val fs-on",s.className="fs-off",n.className="fs-cancel fs-on",c()),e.preventDefault(),e.stopPropagation(),!1;if((8==t||46==t)&&""===a.value){const e=`div#${fsDiv.id} div.fs-param-filled`,t=document.querySelectorAll(e),a=t[t.length-1];if(a)"fs-param-filled"===a.className?a.className="fs-param-filled fs-hilite":(a.className="fs-param-filled fs-hilite")&&a.parentElement.removeChild(a);else{const e=`div#${fsDiv.id} div.fs-param-empty`,t=document.querySelectorAll(e),a=t[t.length-1];a.parentElement.removeChild(a)}}},d=function(e){const t=this.parentElement;t.parentElement.removeChild(t)},u=function({type:e,selector:t,values:r}){new autoComplete({selector:t,source:async function(e,t){let a=[];if("function"==typeof r)a=r();else if("object"==typeof r&&r.url){const t=await fetch(`${r.url}${e}*`);if(!t.ok)throw Error("HTTP-Error: "+t.status);a=await r.cb(t)}else Array.isArray(r)&&(a=r);a.length&&t(a)},minChars:Array.isArray(r)?0:3,delay:150,onSelect:function(t,r,s){const n=this.selector,i=n.parentElement;if("key"===e){const e=i.children[0];e.innerText=n.value,e.className="fs-key fs-on",n.className="fs-off";const t=a.filter((e=>e.key===r))[0];t.noDuplicates&&o.splice(o.indexOf(r),1);const s=i.children[3];s.className="fs-val-input fs-on",s.placeholder=t.prompt,u({type:"val",selector:s,values:t.values}),s.focus()}else if("val"===e){const e=i.children[2];r&&(e.innerText=n.value,e.className="fs-val fs-on"),n.className="fs-off",i.className="fs-param-filled",i.children[4].className="fs-cancel fs-on",c()}}})},h=function(e){const t=n.childNodes;let r={},o=0;const s=t.length;for(;o<s;o++){const e=t[o].children,s=e[1].value;if(s){const t=e[3].value.replace(/\n$/,""),o=a.filter((e=>e.key===s))[0].actualKey;if(o&&t)if(o in r)if("string"==typeof r[o]){const e=r[o];r[o]=[e,t]}else r[o].push(t);else r[o]=t}}e(r)};!function(e,t){const a=i({element:"div",attribs:{id:"fs-widget"},container:e});n=i({element:"div",attribs:{id:"fs",class:"fs"},container:a});const r=i({element:"div",attribs:{class:"switch resource regular pill green","aria-label":"toggle resource","data-pop":"right","data-pop-no-shadow":!0,"data-pop-arrow":!0},container:n});i({element:"input",attribs:{type:"radio",id:"switchResource-3",name:"resource",value:"images",class:"query",autocomplete:"off"},container:r}),i({element:"label",attribs:{for:"switchResource-3"},container:r}),i({element:"input",attribs:{type:"radio",id:"switchResource-4",name:"resource",value:"treatments",class:"query",autocomplete:"off"},container:r}),i({element:"label",attribs:{for:"switchResource-4"},container:r}),i({element:"button",attribs:{id:"fs-go",type:"submit",class:"fs-button-primary",innerText:"go"},container:a}).addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),h(s)})),c()}(e)},o=({resource:e,figureSize:t,rec:r})=>{const o={figureSize:t,rec:r};return"images"===e?(({figureSize:e,rec:t})=>{const r=`<img src="img/bug.gif" width="${t.figureSize}" data-src="${t.uri}" class="lazyload" data-recid="${t.treatmentId}" onerror="this.onerror=null; setTimeout(() => { this.src='${t.uri}' }, 1000);">`,o=t.zenodoRec?`Zenodo ID: <a href="${a.zenodoUri}/${t.zenodoRec}" target="_blank">more on Zenodo</a>`:"";let s="";t.treatmentId&&(s=`<a href="${a.tbUri}/${t.treatmentId}" target="_blank">more on TreatmentBank</a>`);let n="";s?n=`<a href="${a.tbUri}/${t.treatmentId}" target="_blank">${r}</a>`:o&&(n=`<a href="${a.zenodoUri}/${t.zenodoRec}" target="_blank">${r}</a>`);const i=250===e?"visible":"noblock",c=`figure-${e} `+(t.treatmentId?"tb":""),l=t.treatmentTitle.length>30?`${t.treatmentTitle.substring(0,30)}â€¦`:t.treatmentTitle;return`<figure class="${c}">\n    <div class="switches">\n        <div class="close"></div>\n    </div>\n    ${n}\n    <figcaption class="${i}">\n        <details>\n            <summary class="figTitle" data-title="${t.treatmentTitle}">${l}</summary>\n            <p>${t.captionText}</p>\n            ${s}<br>\n            ${o}\n        </details>\n    </figcaption>\n</figure>`})(o):(({figureSize:e,rec:t})=>{let r="",o="";t.zenodoRec&&(r=`<a class="transition-050">Zenodo ID: ${t.zenodoRec}</a>`,o=`<a href="${a.zenodoUri}/${t.zenodoRec}" target="_blank">more on Zenodo</a><br>`);const s=250===e?"visible":"noblock";return`<figure class="${`figure-${e} `+(t.treatmentId?"tb":"")}">\n    <p class="articleTitle">${t.articleTitle}</p>\n    <p class="treatmentDOI">${t.treatmentDOI}</p>\n    <p class="articleAuthor">${t.articleAuthor}</p>\n    <figcaption class="${s}">\n        ${r}\n        <div>\n            <b class="figTitle">${t.title}</b><br>\n            ${o}\n            <a href="${a.tbUri}/${t.treatmentId}" target="_blank">more on TreatmentBank</a>\n        </div>\n    </figcaption>\n</figure>`})(o)},s=(t,r,o)=>{log.info("- renderSearchCriteria(qs, count)"),log.info(`  - qs: ${t}`),log.info(`  - count: ${r}`);const s=new URLSearchParams(t),n=s.get("resource");s.get("page"),s.get("size"),r||(r="sorry, no");const i=[];let c;a.notInSearchCriteria.forEach((e=>s.delete(e))),s.forEach(((e,t)=>{let a;const r=e.match(/(?<operator>\w+)\((?<term>[\w\s]+)\)/);if(r){const{operator:e,term:o}=r.groups;a=`<span class="crit-key">${t}</span> ${e.replace(/_/," ")} <span class="crit-val">${o}</span>`}else a="q"===t?`<span class="crit-key">${e}</span> is in the text`:`<span class="crit-key">${t}</span> is <span class="crit-val">${e}</span>`;i.push(a)}));const l=i.length;c=1===l?i[0]:2===l?`${i[0]} and ${i[1]}`:`${i.slice(0,l-2).join(", ")}, and ${i[l-1]}`,c=`<span class="crit-count">${r}</span> ${n} found where ${c}`,c+=o?'<span aria-label="cache hit" data-pop="top" data-pop-no-shadow data-pop-arrow>ðŸ’¥</span>':"",e("#search-criteria").innerHTML=c},n=(e,t)=>{let a=960;const r=document.getElementById("graphdiv"),o=r.offsetWidth;o<960&&(a=o);c(r,a,200,{x:"journal year",y1:"total",y2:"with images"},e,t)};let i;const c=(e,t,a,r,o,s)=>{const n="rgba(255, 0, 0, 0.6)",c="rgba(255, 0, 0, 0.1)",l="rgba(0, 0, 255, 0.6)",d="rgba(0, 0, 255, 0.1)",u="rgba(0, 0, 0, 0.4)",h={label:r.y1,data:s.map((e=>e.total)),borderColor:n,borderWidth:1,backgroundColor:c,pointStyle:"circle",pointRadius:3,pointBorderColor:"red"},p={label:r.y2,data:s.map((e=>e.withImages)),borderColor:l,borderWidth:1,backgroundColor:d,pointStyle:"circle",pointRadius:3,pointBorderColor:"blue"},f={id:"legendBackground",beforeDraw({legend:e}){this._draw=e.draw,e.draw=()=>null},beforeUpdate({legend:e}){e.topChanged=!1},afterDraw({legend:e},t,a){const{options:{labels:{padding:r}},legendHitBoxes:o,ctx:s}=e;let{top:n,bottom:i,left:c,right:l}=o.reduce((({top:e,bottom:t,left:a,right:r},{top:o,height:s,left:n,width:i})=>({top:Math.min(e,o),bottom:Math.max(t,o+s),left:Math.min(a,n),right:Math.max(r,n+i)})),{top:1/0,bottom:0,left:1/0,right:0});if(n<i&&c<l){n-=r.top??r,i+=r.bottom??r,c-=r.left??r,l+=r.right??r;const t=a.borderWidth??0;let d=0,u=0;c-t<=0?d=-c+t:l+t>=e.chart.width&&(d=e.chart.width-(l+t)),n-t<0&&(u=-n+t),i+t>e.chart.height&&(u=e.chart.height-i-t),0===d&&0===u||(c+=d,l+=d,o.forEach((e=>e.left+=d)),e.left+=d),0===d&&0===u||(n+=u,i+=u,e.topChanged||(e.top+=u,e.topChanged=!0)),c-=Math.floor(t/2),l+=Math.floor(t/2),n-=Math.floor(t/2),i+=Math.floor(t/2),s.save(),s.fillStyle=a.color??"transparent",s.lineWidth=a.borderWidth??0,s.strokeStyle=a.borderColor??"black",s.roundRect(c,n,l-c,i-n,5),s.stroke(),s.fill(),s.restore()}e.draw=this._draw,delete this._draw,e._draw()}};Chart.register(f);const m={type:"line",data:{labels:s.map((e=>e.journalYear)),datasets:[h,p]},plugins:[{legendBackground:f}],options:{interaction:{intersect:!1,mode:"x"},animation:!1,responsive:!0,scales:{x:{display:!0},y:{display:!0,type:"logarithmic",grid:{tickColor:e=>e.tick.major?"silver":"",color:e=>e.tick.major?u:"silver"},border:{},min:1,afterBuildTicks:function(e){e.ticks=e.ticks.filter((({major:e})=>e)).flatMap((({value:e,major:t,significand:a},r,o)=>{if(0===r)return[{value:e,major:t,significand:a}];{const{value:s}=o[r-1],n=Math.abs(.5*s),i=[];let c=s+n;for(;c<e;)i.push({value:c,major:!1,significand:c}),c+=n;return[...i,{value:e,major:t,significand:a}]}}))},ticks:{callback:function(e,t,a){return 1e6===e?"1M":1e5===e?"100K":1e4===e?"10K":1e3===e?"1K":100===e?"100":10===e?"10":1===e?"1":""},autoSkip:!1}}},plugins:{title:{display:!0,text:`occurrence of '${o}' in text by year`},legend:{display:!0,position:"chartArea",labels:{usePointStyle:!0},backgroundColor:"rgba(0, 0, 255, 1)"},legendBackground:{color:"rgb(255,255,255)",borderWidth:1,borderColor:"black"},tooltip:{enabled:!0}}}};let g=document.getElementById("termFreq");g?(i.destroy(),i=new Chart(g,m)):(g=document.createElement("canvas"),g.id="termFreq",console.log(`setting canvas dims to ${t} x ${a}`),g.width=t,g.height=a,e.appendChild(g),i=new Chart(g,m))},l=async t=>{log.info("- getResource(qs)"),e("#throbber").classList.remove("nothrob");const r=new URLSearchParams(t),i=r.get("page"),c=r.get("size"),l=r.get("grid")||"normal",u=a.figureSize[l],h=r.get("resource");let p;r.has("q")&&(p=r.get("q")),Array.from(r).forEach((([e,t])=>{a.params.validZenodeo.includes(e)?t||(r.set("q",e),r.delete(e),p=e):r.delete(e)}));const f=["treatmentId","treatmentTitle","zenodoDep","treatmentDOI","articleTitle","articleAuthor","httpUri","caption"].join("&cols=");let m=`${r.toString()}&cols=${f}`;p&&(m+="&termFreq=true");const g=[];g.push(d({resource:h,queryString:m,figureSize:u})),Promise.all(g).then((e=>{const t={resource:h,prev:i>1?i-1:1,next:parseInt(i)+1,size:c,count:0,recs:[]};return e.forEach((e=>{void 0!==e&&(t.recs.push(...e.recs),t.count+=e.count,t.termFreq=e.termFreq,t.cacheHit=e.cacheHit)})),t})).then((a=>{const r=a.recs.map((e=>o({resource:h,figureSize:u,rec:e}))),i={figureSize:u,figures:r,qs:t,count:a.count,prev:a.prev,next:a.next,cacheHit:a.cacheHit};a.termFreq&&(i.termFreq=a.termFreq,i.term=p),(t=>{const{figureSize:a,figures:r,qs:o,count:i,term:c,termFreq:l,prev:d,next:u,cacheHit:h}=t;log.info(`- renderPage()\n    - figureSize: ${a}px\n    - figures: ${r.length} figures\n    - qs: ${o}\n    - count: ${i}\n    - prev: ${d}\n    - next: ${u}`),e("#grid-images").classList.add(`columns-${a}`),s(o,i,h),e("#throbber").classList.add("nothrob"),l&&n(c,l)})(i)}))},d=async({resource:e,queryString:t,figureSize:r})=>{log.info(`- getResults({ resource, queryString, figureSize })\n    - resource: ${e}\n    - queryString: ${t},\n    - figureSize: ${r}`);const o=`${a.server}/${e}?${t}`,s=await fetch(o);if(s.ok){const t=await s.json(),o=t.item.result.records,n={resource:e,count:0,recs:[],termFreq:t.item.result.termFreq,prev:"",next:"",cacheHit:t.cacheHit||!1};if(o)return n.count=n.count+t.item.result.count,o.forEach((e=>{const t={};t.treatmentId=e.treatmentId,t.treatmentTitle=e.treatmentTitle,t.zenodoRec=e.zenodoDep,t.figureSize=r;const o=e.httpUri.split("/")[4];e.httpUri.indexOf("zenodo")>-1?e.httpUri.indexOf(".svg")>-1?t.uri="/img/kein-preview.png":t.uri=`${a.zenodoUri}/${o}/thumb${r}`:t.uri=e.httpUri,t.captionText=e.captionText,t.treatmentDOI=e.treatmentDOI,t.articleTitle=e.articleTitle,t.articleAuthor=e.articleAuthor,n.recs.push(t)})),n}else alert("HTTP-Error: "+s.status)},u=()=>{log.info("- form2qs()");const e=new URLSearchParams;Array.from(t("form input.query")).filter((e=>e.value)).forEach((t=>{let a=t.name,r=t.value;if("q"===t.name){new URLSearchParams(t.value).forEach(((t,o)=>{if(""===t){const e=r.match(/(^10\.[0-9]{4,}.*)/);e&&e[1]?(a="articleDOI",r=e[1]):(a="q",r=o)}else a=o,r=t;e.append(a,r)}))}else"radio"===t.type||"checkbox"===t.type?(t.checked||"true"===t.checked)&&e.append(a,r):e.append(a,r)}));return e.toString()},h=r=>{log.info(`- qs2form(qs)\n    - qs: ${r}`);const o=new URLSearchParams(r);o.delete("refreshCache");const s=[];o.forEach(((r,o)=>{if(a.params.validZenodeo.includes(o))if(a.params.notValidQ.includes(o))"resource"===o?Array.from(t("input[name=resource]")).filter((e=>e.value===r))[0].checked="true":e(`input[name=${o}]`).value=r;else{let e=o;r&&(e="q"===o?r:`${o}=${r}`),s.push(e)}})),e("#q").value=s.join("&")},p=async t=>{const r=await(async e=>{if(!a.cache[e]){const t=`${a.server}/${e}?cols=`,r=await fetch(t);if(r.ok){const t=(await r.json()).item.result.count;a.cache[e]=t}else alert("HTTP-Error: "+r.status)}return a.cache[e]})(t);e("#help-msg").innerText=`search ${r} ${t}`},f=e=>{log.info("- updateUrl(qs)"),history.pushState("",null,`?${e}`)},m=()=>{log.info("- addListeners()"),e("#refreshCache").addEventListener("click",$),e("#ns-go").addEventListener("click",w),e("#q").addEventListener("focus",q),e("#search-help").addEventListener("click",g),e("div.examples").addEventListener("toggle",b,!0),t(".modalToggle").forEach((e=>e.addEventListener("click",S))),t(".reveal").forEach((e=>e.addEventListener("click",z)));t(".example-insert").forEach((e=>e.addEventListener("click",k)));t("input[name=searchType").forEach((e=>e.addEventListener("click",y)));t(".resource input").forEach((e=>e.addEventListener("click",v)))},g=t=>{e(".examples").classList.contains("hidden")?e(".examples").classList.remove("hidden"):e(".examples").classList.add("hidden")},y=a=>{e("#fancySearch").classList.toggle("hidden"),e("#fancySearch").classList.toggle("noblock"),e("#normalSearch").classList.toggle("hidden"),e("#normalSearch").classList.toggle("noblock");const r=Array.from(t("input[name=searchType]")).filter((e=>e.checked))[0].value;if(a){if("true"===a.target.dataset.checked){const t=e("input[data-checked=false]");t.dataset.checked=!0,t.checked=!0,a.target.dataset.checked="false",a.target.checked=!1}else{const t=e("input[data-checked=true]");t.dataset.checked=!1,t.checked=!1,a.target.dataset.checked="true",a.target.checked=!0}const o="fs"===r?"#fs":window.location.pathname;history.pushState?history.pushState(null,null,o):location.hash=o;const s=Array.from(t("input[name=resource]")),n=s.filter((e=>e.checked))[0],i=s.filter((e=>!e.checked&&e.value===n.value))[0];n.checked=!1,i.checked=!0}else{e("ns"===r?"#switchSearch-1":"#switchSearch-2").checked=!0}},v=e=>{const a=Array.from(t("input[name=resource]")).filter((e=>e.checked))[0];p(a.value)},b=e=>{if(e.target.open){var a=t("details[open]");Array.prototype.forEach.call(a,(function(t){t!==e.target&&t.removeAttribute("open")}))}},k=a=>{e("#q").value=a.target.textContent,e("#ns-go").classList.add("glowing");t("input[name=source").forEach((e=>{"treatments"===e.value&&(e.checked=!0)})),g(),a.stopPropagation(),a.preventDefault()},$=t=>{e("#refreshCache").toggleAttribute("data-pop-show")},w=t=>{""===e("#q").value?q(t):(e("#q").classList.remove("red-placeholder"),e("#throbber").classList.remove("nothrob"),e("#ns-go").classList.remove("glowing"),(()=>{log.info("submitForm()");const e=u();f(e),l(e)})()),t.stopPropagation(),t.preventDefault()},S=r=>{const o=new URL(r.target.href).hash,s=t(".modal");o.length>0?(s.forEach((e=>{e.classList.add(...a.hiddenClasses)})),e(o).classList.remove(...a.hiddenClasses)):s.forEach((e=>e.classList.add(...a.hiddenClasses)))},q=t=>{e("#q").placeholder="search for something",e("#q").classList.remove("red-placeholder"),t.stopPropagation(),t.preventDefault()},z=e=>{const t=e.target.innerText;e.target.innerText=e.target.dataset.reveal,setTimeout((()=>{e.target.innerHTML=t}),2e3),e.stopPropagation(),e.preventDefault()},T="localhost"===window.location.hostname?"INFO":"ERROR";log.level=log[T];const x=()=>{const e=new URL(location),t="#fs"===e.hash?"fs":"ns";if(E(t),"fs"===t&&v(),e.search){(e=>{log.info("loadBookmarkedWebSite(qs)"),log.info(`- qs: ${e}`),m(),h(e),e=u(),l(e)})(e.search.substring(1))}else log.info("loadBlankWebSite()"),m(),p("images")},E=o=>{log.info("initializing fancySearch");const s=e=>async t=>{const a=await t.json(),r=[];return a.item.result.records?a.item.result.records.forEach((t=>r.push(t[e]))):r.push("nothing foundâ€¦ please try again"),r},n=[{key:"text contains",actualKey:"q",values:"",prompt:"search the full text of treatments",noDuplicates:!0},{key:"title",actualKey:"treatmentTitle",values:"",prompt:"search for treatmentTitles starting with the search term",noDuplicates:!0},{key:"authority",actualKey:"authorityName",values:{url:`${a.server}/treatmentAuthors?treatmentAuthor=`,cb:s("author")},prompt:"type at least 3 letters to choose an author",noDuplicates:!0},{key:"family",actualKey:"family",values:{url:`${a.server}/families?family=`,cb:s("family")},prompt:"type at least 3 letters to choose a family",noDuplicates:!1},{key:"kingdom",actualKey:"kingdom",values:{url:`${a.server}/kingdoms?kingdom=`,cb:s("kingdom")},prompt:"type at least 3 letters to choose a kingdom",noDuplicates:!1},{key:"phylum",actualKey:"phylum",values:{url:`${a.server}/phyla?phylum=`,cb:s("phylum")},prompt:"type at least 3 letters to choose a phylum",noDuplicates:!1},{key:"class",actualKey:"class",values:{url:`${a.server}/classes?class=`,cb:s("class")},prompt:"type at least 3 letters to choose a class",noDuplicates:!1},{key:"genus",actualKey:"genus",values:{url:`${a.server}/genera?genus=`,cb:s("genus")},prompt:"type at least 3 letters to choose a genus",noDuplicates:!1},{key:"order",actualKey:"order",values:{url:`${a.server}/orders?order=`,cb:s("order")},prompt:"type at least 3 letters to choose an order",noDuplicates:!1},{key:"taxon",actualKey:"taxon",values:{url:`${a.server}/taxa?taxon=`,cb:s("taxon")},prompt:"type at least 3 letters to choose a taxon",noDuplicates:!1},{key:"journal year",actualKey:"journalYear",values:((e,t)=>{const a=t-e;return Array.from({length:a},((t,a)=>a+e)).map((e=>String(e)))})(1995,2022),prompt:"pick a year of publication",noDuplicates:!0}];new r({selector:e("#fs-container"),helpText:"search images",facets:n,cb:a=>{const r=new URLSearchParams(a),o=Array.from(t("input[name=resource]")).filter((e=>e.checked))[0].value,s=e("input[name=page").value,n=e("input[name=size").value;r.append("resource",o),r.append("page",s),r.append("size",n);const i=r.toString();f(i),l(i)}}),e("#fancySearch").classList.add("hidden"),e("#fancySearch").classList.add("noblock"),"fs"===o&&y()};export{x as init};
